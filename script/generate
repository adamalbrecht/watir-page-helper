#!/usr/bin/env ruby

require 'erb'

def path_to_template name
  File.join Dir.pwd, "script/templates/#{name}.erb"
end

def with_template name
  template_content = File.read path_to_template(name)
  template = ERB.new template_content, 0, "%<>"
  yield template
end

simple_elements = []
simple_elements += (1..6).map{|i| "h#{i}"}
simple_elements += %w{div span p}
texty_elements = simple_elements + %w{dl dd dt form li}

with_template 'test.html' do |template|
  File.open 'features/support/test.html', 'w' do |f|
    f.puts template.result(binding)
  end
end

with_template 'feature' do |template|
  simple_elements.each do |element|
    File.open "features/simple_elements/#{element}.feature", 'w' do |f|
      f.puts template.result(binding)
    end
  end
end

with_template 'generated.rb' do |template|
  File.open 'lib/watir-page-helper/generated.rb', 'w' do |f|
    f.puts template.result(binding)
  end
end